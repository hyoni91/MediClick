<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 해당 파일에 모든 쿼리문을 작성 -->
<mapper namespace="deliveryMapper">
    <resultMap id="delivery" type="com.green.MediClick.provider.delivery.vo.DeliveryVO">
        <id column="DELIVERY_NUM" property="deliveryNum"/>
        <result column="ORDER_NUM" property="orders"/>
        <result column="DELIVERY_DRIVER_NAME" property="deliveryDriverName"/>
        <result column="DELIVERY_DRIVER_PHONE" property="deliveryDriverPhone"/>
        <result column="DELIVERY_ADDRESS" property="deliveryAddress"/>
        <result column="DELIVERY_START_TIME" property="startTime"/>
        <result column="DELIVERY_END_TIME" property="endTime"/>
        <result column="DELIVERY_STATUS" property="deliveryStatus"/>
    </resultMap>

    <select id="deliveryList" resultMap="delivery">
        SELECT * FROM delivery
    </select>

    <select id="ordersList" resultMap="ordersMapper.orders">
        SELECT
        ORDER_NUM
        ,O.REQUEST_NUM
        ,ORDER_DATE
        ,ORDER_STATUS
        ,C.CUSTOMER_NUM
        ,C.CUSTOMER_NAME
        ,(R.QUANTITY * P.PRODUCT_PRICE) as TOTALPRICE
        FROM order_requests R, orders O , customers C, products P
        WHERE O.REQUEST_NUM = R.REQUEST_NUM
        AND R.CUSTOMER_NUM = C.CUSTOMER_NUM
        AND R.PRODUCT_NUM = P.PRODUCT_NUM
    </select>

    <insert id="insertDriver">
        INSERT INTO delivery(
        DELIVERY_DRIVER_NAME
        ,DELIVERY_DRIVER_PHONE
        ) VALUES(
        #{memName}
        ,#{memTel}
        )
    </insert>
</mapper>































